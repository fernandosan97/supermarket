--
-- Script was generated by Devart dbForge Studio for MySQL, Version 8.0.40.0
-- Product home page: http://www.devart.com/dbforge/mysql/studio
-- Script date 21/5/2021 13:12:57
-- Server version: 5.7.17-log
-- Client version: 4.1
--

-- 
-- Disable foreign keys
-- 
/*!40014 SET @OLD_FOREIGN_KEY_CHECKS=@@FOREIGN_KEY_CHECKS, FOREIGN_KEY_CHECKS=0 */;

-- 
-- Set SQL mode
-- 
/*!40101 SET @OLD_SQL_MODE=@@SQL_MODE, SQL_MODE='NO_AUTO_VALUE_ON_ZERO' */;

-- 
-- Set character set the client will use to send SQL statements to the server
--
SET NAMES 'utf8';

--
-- Set default database
--
CREATE DATABASE supermarket;
USE supermarket;

--
-- Drop table `detail_invoice`
--
DROP TABLE IF EXISTS detail_invoice;

--
-- Drop table `kardex`
--
DROP TABLE IF EXISTS kardex;

--
-- Drop table `invoice`
--
DROP TABLE IF EXISTS invoice;

--
-- Drop table `user_roles`
--
DROP TABLE IF EXISTS user_roles;

--
-- Drop table `roles`
--
DROP TABLE IF EXISTS roles;

--
-- Drop table `users`
--
DROP TABLE IF EXISTS users;

--
-- Drop table `detail`
--
DROP TABLE IF EXISTS detail;

--
-- Drop table `product`
--
DROP TABLE IF EXISTS product;

--
-- Drop table `category`
--
DROP TABLE IF EXISTS category;

--
-- Set default database
--
USE supermarket;

--
-- Create table `category`
--
CREATE TABLE category (
  id int(11) NOT NULL AUTO_INCREMENT,
  name varchar(255) NOT NULL,
  PRIMARY KEY (id)
)
ENGINE = INNODB,
AUTO_INCREMENT = 14,
AVG_ROW_LENGTH = 1260,
CHARACTER SET utf8,
COLLATE utf8_general_ci;

--
-- Create table `product`
--
CREATE TABLE product (
  id_product int(11) NOT NULL AUTO_INCREMENT,
  description varchar(255) DEFAULT NULL,
  price double DEFAULT NULL,
  stock int(11) DEFAULT NULL,
  category_id int(11) NOT NULL,
  PRIMARY KEY (id_product)
)
ENGINE = INNODB,
AUTO_INCREMENT = 22,
AVG_ROW_LENGTH = 819,
CHARACTER SET utf8,
COLLATE utf8_general_ci;

--
-- Create foreign key
--
ALTER TABLE product
ADD CONSTRAINT FK1mtsbur82frn64de7balymq9s FOREIGN KEY (category_id)
REFERENCES category (id);

--
-- Create table `detail`
--
CREATE TABLE detail (
  id_detail int(11) NOT NULL AUTO_INCREMENT,
  quantity int(11) NOT NULL,
  product_id int(11) NOT NULL,
  PRIMARY KEY (id_detail)
)
ENGINE = INNODB,
AUTO_INCREMENT = 31,
AVG_ROW_LENGTH = 910,
CHARACTER SET utf8,
COLLATE utf8_general_ci;

--
-- Create foreign key
--
ALTER TABLE detail
ADD CONSTRAINT FKnogkshb9tv6mtc9em7efogdni FOREIGN KEY (product_id)
REFERENCES product (id_product);

--
-- Create table `users`
--
CREATE TABLE users (
  id bigint(20) NOT NULL AUTO_INCREMENT,
  email varchar(50) NOT NULL,
  password varchar(120) NOT NULL,
  username varchar(20) NOT NULL,
  PRIMARY KEY (id)
)
ENGINE = INNODB,
AUTO_INCREMENT = 6,
AVG_ROW_LENGTH = 8192,
CHARACTER SET utf8,
COLLATE utf8_general_ci;

--
-- Create index `UK6dotkott2kjsp8vw4d0m25fb7` on table `users`
--
ALTER TABLE users
ADD UNIQUE INDEX UK6dotkott2kjsp8vw4d0m25fb7 (email);

--
-- Create index `UKr43af9ap4edm43mmtq01oddj6` on table `users`
--
ALTER TABLE users
ADD UNIQUE INDEX UKr43af9ap4edm43mmtq01oddj6 (username);

--
-- Create table `roles`
--
CREATE TABLE roles (
  id int(11) NOT NULL AUTO_INCREMENT,
  name varchar(20) DEFAULT NULL,
  PRIMARY KEY (id)
)
ENGINE = INNODB,
AUTO_INCREMENT = 3,
AVG_ROW_LENGTH = 8192,
CHARACTER SET utf8,
COLLATE utf8_general_ci;

--
-- Create table `user_roles`
--
CREATE TABLE user_roles (
  user_id bigint(20) NOT NULL,
  role_id int(11) NOT NULL,
  PRIMARY KEY (user_id, role_id)
)
ENGINE = INNODB,
AVG_ROW_LENGTH = 8192,
CHARACTER SET utf8,
COLLATE utf8_general_ci;

--
-- Create foreign key
--
ALTER TABLE user_roles
ADD CONSTRAINT FKh8ciramu9cc9q3qcqiv4ue8a6 FOREIGN KEY (role_id)
REFERENCES roles (id);

--
-- Create foreign key
--
ALTER TABLE user_roles
ADD CONSTRAINT FKhfh9dx7w3ubf1co1vdev94g3f FOREIGN KEY (user_id)
REFERENCES users (id);

--
-- Create table `invoice`
--
CREATE TABLE invoice (
  id_invoice int(11) NOT NULL AUTO_INCREMENT,
  description varchar(255) NOT NULL,
  isv double NOT NULL,
  subtotal double NOT NULL,
  total double NOT NULL,
  PRIMARY KEY (id_invoice)
)
ENGINE = INNODB,
AUTO_INCREMENT = 14,
AVG_ROW_LENGTH = 1820,
CHARACTER SET utf8,
COLLATE utf8_general_ci;

--
-- Create table `kardex`
--
CREATE TABLE kardex (
  id int(11) NOT NULL AUTO_INCREMENT,
  date datetime NOT NULL,
  quantity int(11) NOT NULL,
  invoice_id int(11) NOT NULL,
  product_id int(11) NOT NULL,
  PRIMARY KEY (id)
)
ENGINE = INNODB,
AUTO_INCREMENT = 19,
AVG_ROW_LENGTH = 910,
CHARACTER SET utf8,
COLLATE utf8_general_ci;

--
-- Create foreign key
--
ALTER TABLE kardex
ADD CONSTRAINT FK4imek26c883sd8owonyypharc FOREIGN KEY (invoice_id)
REFERENCES invoice (id_invoice);

--
-- Create foreign key
--
ALTER TABLE kardex
ADD CONSTRAINT FKaswx1vup3i1g59xri8fq367eq FOREIGN KEY (product_id)
REFERENCES product (id_product);

--
-- Create table `detail_invoice`
--
CREATE TABLE detail_invoice (
  id int(11) NOT NULL AUTO_INCREMENT,
  detail_id int(11) NOT NULL,
  invoice_id int(11) NOT NULL,
  PRIMARY KEY (id)
)
ENGINE = INNODB,
AUTO_INCREMENT = 19,
AVG_ROW_LENGTH = 1024,
CHARACTER SET utf8,
COLLATE utf8_general_ci;

--
-- Create foreign key
--
ALTER TABLE detail_invoice
ADD CONSTRAINT FKmrca75l0ti7lq6k11xonkte5f FOREIGN KEY (detail_id)
REFERENCES detail (id_detail);

--
-- Create foreign key
--
ALTER TABLE detail_invoice
ADD CONSTRAINT FKmt3tg7l0sp2hj0hyrglrmlbxr FOREIGN KEY (invoice_id)
REFERENCES invoice (id_invoice);

-- 
-- Dumping data for table category
--
INSERT INTO category VALUES
(1, 'Linea blanca'),
(2, 'Infantil'),
(3, 'Carnes y Embutidos'),
(4, 'Frutas y Verduras'),
(5, 'Panaderia y Dulces'),
(6, 'Zumos y Bebidas'),
(7, 'Cosmetico y Cuidado Personal'),
(8, 'Hogar y Limpieza'),
(9, 'Infantil'),
(10, 'Material de contruccion'),
(11, 'Reposteria'),
(12, 'Hogar'),
(13, 'Frituras y Golosinas');

-- 
-- Dumping data for table users
--
INSERT INTO users VALUES
(4, 'fersan@gmail.com', '$2a$10$GZSZTPVDY0N8tPHdG5ZAweePPBtsSU/5hle3cN8cRPZ1qtGojlJj6', 'fernandosan'),
(5, 'misan@gmail.com', '$2a$10$YXYkiq3k9hiZz1nLwpkoZOstpery/8jLfV0HshtSx0gFqxluzuSz6', 'miguelsan');

-- 
-- Dumping data for table roles
--
INSERT INTO roles VALUES
(1, 'ROLE_ADMIN'),
(2, 'ROLE_CASHIER');

-- 
-- Dumping data for table product
--
INSERT INTO product VALUES
(1, 'Muebles de sala', 8000, 10, 1),
(2, 'Estufa electrica', 3000, 10, 1),
(4, 'Escoba', 30, 30, 8),
(5, 'Trapeador', 20, 39, 8),
(6, 'Asistiin bolsa', 10, 100, 8),
(7, 'Asisitin galon', 20, 150, 8),
(8, 'Chuleta ahumada pieza', 50, 30, 3),
(9, 'Pechuga de pollo lb', 45, 20, 3),
(10, 'Carne molida lb', 30, 25, 3),
(11, '1 lt Jugo de Naranja Sula', 25, 20, 6),
(12, '1 lt Jugo de Naranza Leyde', 23, 20, 6),
(13, 'Coca cola 3 lts', 26, 53, 6),
(14, 'Pepsi cola 3 lits', 48, 51, 6),
(15, 'Papel higienico Scoot', 75, 10, 8),
(16, 'Sandia', 40, 10, 4),
(17, 'Melon', 35, 20, 4),
(18, 'Manzana lbs', 80, 5, 4),
(19, 'Papel desechable hogguies', 150, 20, 2),
(20, 'Pastel 3 leches', 350, 10, 11),
(21, 'Plancha', 450, 10, 1);

-- 
-- Dumping data for table invoice
--
INSERT INTO invoice VALUES
(5, 'CONSUMIDOR FINAL', 6000, 40000, 46000),
(6, 'CONSUMIDOR FINAL', 6000, 40000, 46000),
(7, 'CONSUMIDOR FINAL', 46.5, 310, 356.5),
(8, 'CONSUMIDOR FINAL', 19.5, 130, 149.5),
(9, 'CONSUMIDOR FINAL', 26.099999999999998, 174, 200.1),
(10, 'CONSUMIDOR FINAL', 59.4, 396, 455.4),
(11, 'CONSUMIDOR FINAL', 26.099999999999998, 174, 200.1),
(12, 'CONSUMIDOR FINAL/FERNANDO SANCHEZ', 39, 260, 299),
(13, 'CONSUMIDOR FINAL/FERNANDO SANCHEZ', 31.5, 210, 241.5);

-- 
-- Dumping data for table detail
--
INSERT INTO detail VALUES
(13, 2, 1),
(14, 3, 1),
(15, 2, 1),
(16, 3, 1),
(17, 5, 5),
(18, 7, 4),
(19, 3, 4),
(20, 2, 5),
(21, 2, 14),
(22, 3, 13),
(23, 5, 14),
(24, 6, 13),
(25, 2, 14),
(26, 3, 13),
(27, 5, 13),
(28, 5, 13),
(29, 4, 5),
(30, 5, 13);

-- 
-- Dumping data for table user_roles
--
INSERT INTO user_roles VALUES
(4, 1),
(5, 2);

-- 
-- Dumping data for table kardex
--
INSERT INTO kardex VALUES
(1, '2021-05-20 03:59:26', 2, 5, 1),
(2, '2021-05-20 03:59:26', 3, 5, 1),
(3, '2021-05-20 04:03:17', 2, 6, 1),
(4, '2021-05-20 04:03:17', 3, 6, 1),
(5, '2021-05-20 20:11:26', 5, 7, 5),
(6, '2021-05-20 20:11:26', 7, 7, 4),
(7, '2021-05-20 20:11:58', 3, 8, 4),
(8, '2021-05-20 20:11:58', 2, 8, 5),
(9, '2021-05-20 20:12:17', 2, 9, 14),
(10, '2021-05-20 20:12:17', 3, 9, 13),
(11, '2021-05-20 20:12:24', 5, 10, 14),
(12, '2021-05-20 20:12:24', 6, 10, 13),
(13, '2021-05-20 20:14:38', 2, 11, 14),
(14, '2021-05-20 20:14:38', 3, 11, 13),
(15, '2021-05-21 15:56:23', 5, 12, 13),
(16, '2021-05-21 15:56:23', 5, 12, 13),
(17, '2021-05-21 15:58:20', 4, 13, 5),
(18, '2021-05-21 15:58:20', 5, 13, 13);

-- 
-- Dumping data for table detail_invoice
--
INSERT INTO detail_invoice VALUES
(3, 15, 6),
(4, 16, 6),
(5, 17, 7),
(6, 18, 7),
(7, 19, 8),
(8, 20, 8),
(9, 21, 9),
(10, 22, 9),
(11, 23, 10),
(12, 24, 10),
(13, 25, 11),
(14, 26, 11),
(15, 27, 12),
(16, 28, 12),
(17, 29, 13),
(18, 30, 13);

-- 
-- Restore previous SQL mode
-- 
/*!40101 SET SQL_MODE=@OLD_SQL_MODE */;

-- 
-- Enable foreign keys
-- 
/*!40014 SET FOREIGN_KEY_CHECKS = @OLD_FOREIGN_KEY_CHECKS */;